"use strict";(self.webpackChunkstocky_web=self.webpackChunkstocky_web||[]).push([[940],{7940:(w,m,o)=>{o.r(m),o.d(m,{ReportModule:()=>B});var C=o(3213),h=o(8795),e=o(4650),c=o(8244),l=o(788),d=o(9132),x=o(5861),i=(()=>{return(n=i||(i={})).SUMMARIZED="SUMMARIZED",n.DETAILED="DETAILED",i;var n})(),E=o(3905),S=o(2340),D=o(529);let Z=(()=>{class n{constructor(t){this.http=t,this.url=S.N.api.baseUrl+"/report"}salesReport(t){return this.http.post(`${this.url}/sales/collection-report`,t,{responseType:"arraybuffer"})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(D.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var M=o(6895),u=o(433),g=o(3679),f=o(6704),J=o(6616),L=o(7044),A=o(1811),U=o(1971),F=o(1102),R=o(8521),I=o(4788),Q=o(4897),N=o(4734);function X(n,a){}const _=function(){return[16,16]};function G(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"nz-form-label",8),e._uU(4,"Report Type"),e.qZA(),e.TgZ(5,"nz-form-control")(6,"nz-radio-group",9),e.NdJ("ngModelChange",function(s){e.CHM(t);const p=e.oxw();return e.KtG(p.onReportTypeChange(s))}),e.TgZ(7,"label",10),e._uU(8,"Summarized Report"),e.qZA(),e.TgZ(9,"label",10),e._uU(10,"Detailed Report"),e.qZA()()()(),e.TgZ(11,"div",11)(12,"nz-form-label",8),e._uU(13,"Start Date"),e.qZA(),e.TgZ(14,"app-date-picker",12),e.NdJ("selectChange",function(s){e.CHM(t);const p=e.oxw();return e.KtG(p.onDateSelected(s,"start"))}),e.qZA()(),e.TgZ(15,"div",11)(16,"nz-form-label",8),e._uU(17,"End Date"),e.qZA(),e.TgZ(18,"app-date-picker",12),e.NdJ("selectChange",function(s){e.CHM(t);const p=e.oxw();return e.KtG(p.onDateSelected(s,"end"))}),e.qZA()(),e.TgZ(19,"div",13)(20,"div",14)(21,"div",15)(22,"button",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onGetSalesReport())}),e.TgZ(23,"span"),e._uU(24,"Proceed"),e.qZA(),e._UZ(25,"span",17),e.qZA()()()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("nzGutter",e.DdM(22,_)),e.xp6(1),e.Q6J("nzLg",24)("nzXs",24),e.xp6(1),e.Q6J("nzNoColon",!1),e.xp6(3),e.Q6J("ngModel",t.selectedReportType),e.xp6(1),e.Q6J("nzValue",t.salesReportTypeEnum.SUMMARIZED),e.xp6(2),e.Q6J("nzValue",t.salesReportTypeEnum.DETAILED),e.xp6(2),e.Q6J("nzLg",12)("nzXs",24),e.xp6(1),e.Q6J("nzNoColon",!1),e.xp6(2),e.Q6J("hasError",t.isInvalidStartDate),e.xp6(1),e.Q6J("nzLg",12)("nzXs",24),e.xp6(1),e.Q6J("nzNoColon",!1),e.xp6(2),e.Q6J("hasError",t.isInvalidEndDate),e.xp6(1),e.Q6J("nzLg",24)("nzXs",24),e.xp6(2),e.Q6J("nzLg",12)("nzSpan",12)("nzXs",10),e.xp6(1),e.Q6J("nzLoading",t.isLoading)("nzSize","default")}}function O(n,a){if(1&n&&(e.ynx(0),e._UZ(1,"app-sales-transaction-receipt-viewer",18,19),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("data",t.reportData)("showControls",!0)}}function K(n,a){1&n&&e._UZ(0,"nz-empty")}const P=[{path:"sales-report",component:(()=>{class n{constructor(t){this.reportUsecase=t,this.selectedReportType=i.SUMMARIZED,this.salesReportTypeEnum=i,this.isLoading=!1,this.isInvalidStartDate=!1,this.isInvalidEndDate=!1}onReportTypeChange(t){t&&(this.selectedReportType=t)}onDateSelected(t,r){t&&("start"===r&&(this.startDate=t),"end"===r&&(this.endDate=t))}onGetSalesReport(){var t=this;return(0,x.Z)(function*(){if(!t.validateParams().status)return;t.isLoading=!0;const s={reportType:t.selectedReportType,endDate:t.endDate,startDate:t.startDate},p=yield(0,E.z)(t.reportUsecase.salesReport(s));t.isLoading=!1,t.displayReportData(p)})()}validateParams(){let t={status:!0,message:""};return this.startDate?this.isInvalidStartDate=!1:(this.isInvalidStartDate=!0,t.message="provide a valid start date",t.status=!1),this.endDate?this.isInvalidEndDate=!1:(this.isInvalidEndDate=!0,t.message="provide a valid end date",t.status=!1),t}displayReportData(t){this.reportData=t,this.isLoading=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-report-sales"]],decls:9,vars:4,consts:[[3,"breadcrumb","content"],["breadCrumbTmpl",""],["content",""],[4,"ngIf","ngIfElse"],["noFileTmpl",""],["nz-col","","nzSpan","24",1,"ph-main","m-t-1em"],["nz-row","",3,"nzGutter"],["disabled","","nz-col","",1,"m-t-sm-1em",3,"nzLg","nzXs"],[3,"nzNoColon"],[3,"ngModel","ngModelChange"],["nz-radio","",3,"nzValue"],["nz-col","",1,"m-t-sm-1em",3,"nzLg","nzXs"],[3,"hasError","selectChange"],["nz-col","","nzSpan","24",1,"m-t-1em","m-t-sm-2em","m-b-2em",3,"nzLg","nzXs"],["nz-row","","nzJustify","space-between"],["nz-col","",3,"nzLg","nzSpan","nzXs"],["nz-button","","nzType","primary",3,"nzLoading","nzSize","click"],["nz-icon","","nzType","check"],[3,"data","showControls"],["receiptViewerComponent",""]],template:function(t,r){if(1&t&&(e.TgZ(0,"page-header",0),e.YNc(1,X,0,0,"ng-template",null,1,e.W1O),e.YNc(3,G,26,23,"ng-template",null,2,e.W1O),e.qZA(),e.TgZ(5,"nz-card"),e.YNc(6,O,3,2,"ng-container",3),e.YNc(7,K,1,0,"ng-template",null,4,e.W1O),e.qZA()),2&t){const s=e.MAs(2),p=e.MAs(4),V=e.MAs(8);e.Q6J("breadcrumb",s)("content",p),e.xp6(6),e.Q6J("ngIf",r.reportData)("ngIfElse",V)}},dependencies:[M.O5,u.JJ,u.On,c.q,g.t3,g.SK,f.iK,f.Fd,J.ix,L.w,A.dQ,U.bd,F.Ls,R.Of,R.Dg,I.p9,Q.L,N.l],encapsulation:2}),n})()},{path:"expenses-report",component:l.s},{path:"employees-report",component:l.s},{path:"customers-report",component:l.s},{path:"stock-report",component:l.s}];let Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.Bz.forChild(P),d.Bz]}),n})(),B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[Y,C.m8,h.SalesModule]}),n})()}}]);