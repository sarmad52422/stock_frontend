"use strict";(self.webpackChunkstocky_web=self.webpackChunkstocky_web||[]).push([[795],{4734:(W,w,a)=>{a.d(w,{l:()=>A});var i=a(6600),l=a(4650),U=a(1481),_=a(7375),M=a(6895),t=a(4788),f=a(2197);function C(g,y){if(1&g&&(l.ynx(0),l.TgZ(1,"div",5),l._UZ(2,"app-simple-button",6)(3,"app-simple-button",7),l.qZA(),l.BQk()),2&g){const m=l.oxw();l.xp6(2),l.Q6J("action",m.printAction)("args",m.data),l.xp6(1),l.Q6J("action",m.downloadAction)("args",m.data)("disabled",!m.isContentLoaded)}}function Z(g,y){if(1&g&&(l.ynx(0),l.TgZ(1,"div",8),l._UZ(2,"iframe",9),l.qZA(),l.BQk()),2&g){const m=l.oxw();l.xp6(2),l.Q6J("src",m.resourceUrl,l.uOi)}}function S(g,y){1&g&&l._UZ(0,"nz-empty")}let A=(()=>{class g{constructor(m,u){this.sanitizer=m,this.util=u,this.showControls=!1,this.isContentLoaded=!1,this.downloadAction=()=>{if(this.data){const h=this.util.handleCreateFileResourceUrl(this.data,this.util.getFileMimeType(i.Tv.PDF));this.util.handleFileDownload(h,i.Gf.TRANSACTION_RECEIPT)}},this.printAction=()=>{if(this.data){const h=this.util.handleCreateFileResourceUrl(this.data,this.util.getFileMimeType(i.Tv.PDF));let c=window.open(`${h}`,"","height=550px, width=550px");c.focus(),c.print()}}}ngOnInit(){this.data&&this.onLoadReportBuffer(this.data)}ngOnChanges(m){this.ngOnInit()}onClear(){this.isContentLoaded=!1,this.data=void 0,this.resourceUrl=void 0}onLoadReportBuffer(m){if(m){const u=`${this.util.handleCreateFileResourceUrl(m,this.util.getFileMimeType(i.Tv.PDF))}#toolbar=0`;this.resourceUrl=this.sanitizer.bypassSecurityTrustResourceUrl(u),this.isContentLoaded=!0}}}return g.\u0275fac=function(m){return new(m||g)(l.Y36(U.H7),l.Y36(_.f))},g.\u0275cmp=l.Xpm({type:g,selectors:[["app-sales-transaction-receipt-viewer"]],inputs:{data:"data",showControls:"showControls"},features:[l.TTD],decls:6,vars:3,consts:[[1,"pdf-viewer-box"],[1,"tc"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["emptyTemplateRef",""],[1,"mb3","flex","flex-row","justify-start","w-100"],["buttonText","Print","icon","printer",1,"mr2",3,"action","args"],["buttonText","Download","icon","download",1,"mr2",3,"action","args","disabled"],[1,"pdf-container"],[3,"src"]],template:function(m,u){if(1&m&&(l.TgZ(0,"div",0)(1,"div",1),l.YNc(2,C,4,5,"ng-container",2),l.qZA()(),l.YNc(3,Z,3,1,"ng-container",3),l.YNc(4,S,1,0,"ng-template",null,4,l.W1O)),2&m){const h=l.MAs(5);l.xp6(2),l.Q6J("ngIf",u.showControls),l.xp6(1),l.Q6J("ngIf",u.resourceUrl)("ngIfElse",h)}},dependencies:[M.O5,t.p9,f.q],styles:[".pdf-container[_ngcontent-%COMP%]{width:100%;height:600px;overflow:hidden}iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:0}.iframe[_ngcontent-%COMP%] > iframe[_ngcontent-%COMP%] > #toolbar[_ngcontent-%COMP%]{display:none}"]}),g})()},8795:(W,w,a)=>{a.r(w),a.d(w,{SalesModule:()=>Un});var i=a(3213),l=a(1597),U=a(482),_=a(727),M=a(1017),t=a(4650),f=a(4201),C=a(6291);let Z=(()=>{class e{constructor(n){this.usecase=n,this.cart=new M.Z,this.sub=new _.w0}ngOnDestroy(){this.sub.unsubscribe()}ngOnInit(){this.sub.add(this.usecase.cart$.subscribe(n=>this.cart=n))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.j))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sale-cart-amount"]],decls:17,vars:4,consts:[[1,"cart-amount-wrapper"],[1,"cart-amount"],[3,"amount"],[1,"cart-amount","grand-total"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span"),t._uU(3,"Discount: "),t.qZA(),t._UZ(4,"app-amount-currency",2),t.qZA(),t.TgZ(5,"div",1)(6,"span"),t._uU(7,"Tax: "),t.qZA(),t._UZ(8,"app-amount-currency",2),t.qZA(),t.TgZ(9,"div",1)(10,"span"),t._uU(11,"Sub Total: "),t.qZA(),t._UZ(12,"app-amount-currency",2),t.qZA(),t.TgZ(13,"div",3)(14,"span"),t._uU(15,"Grand Total: "),t.qZA(),t._UZ(16,"app-amount-currency",2),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("amount",o.cart.discountTotal),t.xp6(4),t.Q6J("amount",o.cart.taxTotal),t.xp6(4),t.Q6J("amount",o.cart.subTotal),t.xp6(4),t.Q6J("amount",o.cart.grandTotal))},dependencies:[C.f],styles:[".cart-amount-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;line-height:30px;padding-left:20px;padding-right:20px;font-size:15px;font-weight:400}.cart-amount[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.grand-total[_ngcontent-%COMP%]{font-weight:900;font-size:19px}@media screen and (min-width: 40em) and (max-width: 52em){.grand-total[_ngcontent-%COMP%]{font-weight:900;font-size:17px}}@media screen and (max-width: 640px){.grand-total[_ngcontent-%COMP%]{font-weight:900;font-size:17px}}"]}),e})();var S=a(5861),A=a(3905),g=a(7170),y=(()=>((y||(y={})).SALE_ACCESS_ACTION_SALE_SAVE_ORDER="ACCESS_ACTION_SALE_SAVE_ORDER",y))(),m=a(9662),u=a(6600),h=a(5156),c=a(3984),I=a(387),z=a(2340),j=a(529);let vt=(()=>{class e{constructor(n){this.http=n,this.url=z.N.api.baseUrl+"/sales/transaction"}save(n){return this.http.post(`${this.url}/create`,n,{observe:"response"})}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(j.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var G=a(4734),bt=a(7131),q=a(2543);let $=(()=>{class e{constructor(n,o,r){this.drawerService=n,this.http=o,this.responsiveService=r,this.url=z.N.api.baseUrl+"/sales/transaction"}handlePreviewReceipt(n){return this.drawerService.create({nzTitle:"Preview Receipt",nzFooter:" ",nzExtra:" ",nzClosable:!0,nzMaskClosable:!1,nzWidth:this.getDrawerSize(),nzContent:G.l,nzContentParams:{data:n,showControls:!0}})}searchTransactionReceipt(n){return this.http.get(`${this.url}/search-receipt?serial=${n}`,{responseType:"arraybuffer"})}searchTransactionReport(n){return this.http.post(`${this.url}/search-report`,n,{responseType:"arraybuffer"})}getDrawerSize(){return this.responsiveService.screenWidth$.value>700?720:350}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(bt.ai),t.LFG(j.eN),t.LFG(q.k))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Q=a(7375),Pt=a(2197),Ot=a(3175),x=a(6895),P=a(433),d=a(3679),v=a(6704),L=a(7044),E=a(1102),k=a(8521),tt=a(8800);let Zt=(()=>{class e{constructor(){this.text="oops, nothing found!"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-nothing-found"]],inputs:{text:"text"},decls:2,vars:1,consts:[["nz-typography",""],[3,"innerHTML"]],template:function(n,o){1&n&&(t.TgZ(0,"label",0),t._UZ(1,"code",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("innerHTML",o.text,t.oJD))},dependencies:[tt.ZU],encapsulation:2}),e})();function wt(e,s){1&e&&t._UZ(0,"span",10)}const At=function(e){return{"border-color":e}};function Ut(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"label",7),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,p=t.oxw(3);return t.KtG(p.onSelectPaymentMethod(r))}),t.YNc(1,wt,1,0,"span",8),t._UZ(2,"span",9),t.qZA()}if(2&e){const n=t.oxw().$implicit,o=t.oxw(3);t.Q6J("ngStyle",t.VKq(4,At,o.isSelected(n)?"#9eebcf":""))("nzValue",n),t.xp6(1),t.Q6J("ngIf",o.showIcon&&o.isSelected(n)),t.xp6(1),t.Q6J("innerHTML",n.title,t.oJD)}}function Mt(e,s){if(1&e&&(t.ynx(0),t.YNc(1,Ut,3,6,"label",6),t.BQk()),2&e){const n=s.$implicit;t.xp6(1),t.Q6J("ngIf",n.isActiveStatus)}}function Lt(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"nz-radio-group",4),t.NdJ("ngModelChange",function(r){t.CHM(n);const p=t.oxw(2);return t.KtG(p.paymentOption=r)}),t.YNc(2,Mt,2,1,"ng-container",5),t.qZA(),t.BQk()}if(2&e){const n=t.oxw().ngIf,o=t.oxw();t.xp6(1),t.Q6J("ngModel",o.paymentOption),t.xp6(1),t.Q6J("ngForOf",n)}}function Et(e,s){if(1&e&&(t.ynx(0),t.YNc(1,Lt,3,2,"ng-container",3),t.BQk()),2&e){const n=s.ngIf;t.oxw();const o=t.MAs(7);t.xp6(1),t.Q6J("ngIf",n.length>0)("ngIfElse",o)}}function It(e,s){1&e&&t._UZ(0,"app-nothing-found",11)}let nt=(()=>{class e{constructor(n,o){this.cartUsecase=n,this.paymentUsecase=o,this.radioStyle="radio",this.showIcon=!1,this.products=Array(2)}ngOnInit(){var n=this;return(0,S.Z)(function*(){n.cartUsecase.cart$.subscribe(o=>n.cart=o),n.paymentOptions$=n.paymentUsecase.getAll(!0)})()}isSelected(n){return this.paymentOption?.id===n.id}onSelectPaymentMethod(n){this.cart&&(this.cart.paymentOption=n,this.cartUsecase.cart.next(this.cart))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.j),t.Y36(Ot.h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sale-cart-payment-options"]],inputs:{radioStyle:"radioStyle",showIcon:"showIcon"},decls:8,vars:3,consts:[[1,"self-center"],[4,"ngIf"],["noRecordTmpl",""],[4,"ngIf","ngIfElse"],["nzButtonStyle","outline","nzSize","large",1,"pa3",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["nz-radio","",3,"ngStyle","nzValue","click",4,"ngIf"],["nz-radio","",3,"ngStyle","nzValue","click"],["class","mr2","nz-icon","","nzTheme","outline","nzType","check-circle",4,"ngIf"],[1,"b",3,"innerHTML"],["nz-icon","","nzTheme","outline","nzType","check-circle",1,"mr2"],["text","no payment options"]],template:function(n,o){1&n&&(t.TgZ(0,"nz-form-item")(1,"nz-form-label",0),t._uU(2,"Choose Payment Method"),t.qZA(),t.TgZ(3,"nz-form-control"),t.YNc(4,Et,2,2,"ng-container",1),t.ALo(5,"async"),t.qZA()(),t.YNc(6,It,1,0,"ng-template",null,2,t.W1O)),2&n&&(t.xp6(4),t.Q6J("ngIf",t.lcZ(5,1,o.paymentOptions$)))},dependencies:[x.sg,x.O5,x.PC,P.JJ,P.On,d.t3,d.SK,v.Nx,v.iK,v.Fd,L.w,E.Ls,k.Of,k.Dg,Zt,x.Ov],styles:[".p-option[_ngcontent-%COMP%]{padding:20px;background:aqua;border:black 2px;line-height:35px;font-size:18px;font-weight:500}"]}),e})(),et=(()=>{class e{constructor(n,o,r,p,T,X,Mn){var b=this;this.cartUsecase=n,this.modalService=o,this.settingUsecase=r,this.notification=p,this.transactionUsecase=T,this.receiptUsecase=X,this.util=Mn,this.message=g.v0,this.PermissionConstant=y,this.sub=new _.w0,this.emptyAction=()=>{},this.handleSaveTransaction=function(){var H=(0,S.Z)(function*(Ln){if(!b.cart)return void b.notification.error(b.message.VALIDATION_ERROR,b.message.CART_IS_REQUIRED,{nzPlacement:"top"});const yt=b.canProceedToPayment();if(!yt.status)return void b.notification.error(b.message.VALIDATION_ERROR,yt.message,{nzPlacement:"top"});const En=b.cart.toTransaction(),In=yield b.util.handleUsecaseRequest(b.transactionUsecase.save(En),b.notification);yield b.handlePreviewReceipt(In)});return function(Ln){return H.apply(this,arguments)}}(),this.handleClearButton=H=>{this.cart?.emptyCart()},this.handleSaveAsOrderButton=H=>{}}ngOnInit(){var n=this;return(0,S.Z)(function*(){n.sub.add(n.cartUsecase.cart$.subscribe(o=>n.cart=o)),n.isCustomerRequired=yield n.settingUsecase.getByKeyAsBool(m.Q.SETTING_SALES_ENFORCE_CUSTOMER_ON_SALES_CHECKOUT,u.Cm.SALES,!0)})()}ngOnDestroy(){this.sub.unsubscribe()}handlePreviewReceipt(n){var o=this;return(0,S.Z)(function*(){if(n.ok&&n.body&&n.body.receiptUrl){const{reference:r,serial:p}=n.body;if(r&&p){const T=yield(0,A.z)(o.receiptUsecase.searchTransactionReceipt(p));o.receiptUsecase.handlePreviewReceipt(T),o.cart?.emptyCart()}}})()}canProceedToPayment(){const n=this.cart;return n?n?.items&&n?.items.length?this.isCustomerRequired&&!n?.customer?.id?{message:"Customer is required, please search or create one",status:!1}:this.hasPaymentOption()?{message:"",status:!0}:{message:this.message.SELECT_PAYMENT_OPTION,status:!1}:{message:"Cart is empty, please add some products",status:!1}:{message:"Cart is not present, kindly refresh and add products",status:!1}}hasPaymentOption(){return!!(this.cart&&this.cart.paymentOption&&this.cart.paymentOption.id)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.j),t.Y36(h.Sf),t.Y36(c.F),t.Y36(I.zb),t.Y36(vt),t.Y36($),t.Y36(Q.f))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sale-cart-buttons"]],decls:8,vars:7,consts:[[1,"container"],[1,"column-1","mgb--13"],[1,"column-1"],["buttonClass","ml1 mr1","buttonText","Pay","buttonType","primary","icon","credit-card",3,"action","usePopConfirm"],[1,"column-2"],["buttonText","Clear","icon","delete","popCancelText","No, Cancel","popOkText","Yes, Clear Items",1,"flex-grow-1","ml2",3,"action","usePopConfirm"],["buttonText","Save","icon","delete","popCancelText","No, Cancel","popOkText","Yes, Save as order",1,"flex-grow-1","ml2","mr-11",3,"action","disabled","usePopConfirm"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-sale-cart-payment-options"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"app-simple-button",3),t.qZA(),t.TgZ(5,"div",4),t._UZ(6,"app-simple-button",5)(7,"app-simple-button",6),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("action",o.handleSaveTransaction)("usePopConfirm",!0),t.xp6(2),t.Q6J("action",o.handleClearButton)("usePopConfirm",!0),t.xp6(1),t.Q6J("action",o.handleSaveAsOrderButton)("disabled",!0)("usePopConfirm",!0))},dependencies:[Pt.q,nt],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.column-1[_ngcontent-%COMP%]{flex:1;padding-right:14px;padding-left:14px;width:100%}.mgb--13[_ngcontent-%COMP%]{margin-bottom:-24px;margin-left:6px}.column-2[_ngcontent-%COMP%]{flex:1;padding-left:10px;display:flex;flex-direction:row;margin-top:10px}.column-2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}.mr-15[_ngcontent-%COMP%]{margin-right:15px}"]}),e})();var Rt=a(6485),ot=a(6656),Jt=a(3121),Qt=a(7570),Dt=a(8807),Nt=a(8470),Ft=a(6836);const Yt=["searchModelDropdownComponent"];function Bt(e,s){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=s.item;let o;t.xp6(1),t.lnq(" ",null!==(o=n.customerFirstName)&&void 0!==o?o:""," - ",null!==(o=n.customerLastName)&&void 0!==o?o:""," (",null!==(o=n.customerPhone)&&void 0!==o?o:"-",") ")}}const Kt=function(){return{placeholder:"Search Customer",mode:"default"}},Vt=function(){return{size:"default"}},Xt=function(e){return{display:e}};let st=(()=>{class e{constructor(n,o){this.cartUsecase=n,this.customerUsecase=o,this.ModalOrDrawer=u.NH,this.CompanyRoutes=Rt.cF,this.salesPoint=ot.v.SALES_POINT,this.subscription=new _.w0}ngOnInit(){this.subscription.add(this.cartUsecase.cart$.subscribe(n=>this.cart=n)),this.subscription.add(this.customerUsecase.customer$.subscribe(n=>this.onNotifyCustomerSave(n)))}onCustomerSelected(n){this.cart&&n&&(this.cart.customer=n)}onNotifyCustomerSave(n){if(n&&n.from===ot.v.SALES_POINT){const o=n.customer;o&&o.id&&o.customerFirstName&&o.customerPhone&&this.salesModelDropdown&&(this.salesModelDropdown.value=[o],this.salesModelDropdown.defaultValues=o,this.onCustomerSelected(o))}}ngOnDestroy(){this.customerUsecase.setCustomer({}),this.subscription.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.j),t.Y36(Jt.z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sale-cart-customer-search"]],viewQuery:function(n,o){if(1&n&&t.Gf(Yt,7),2&n){let r;t.iGM(r=t.CRH())&&(o.salesModelDropdown=r.first)}},decls:13,vars:13,consts:[["content","Search or create a customer before accepting payment"],["nzErrorTip","","nzValidateStatus","success",3,"nzSpan"],["nz-row","","nzGutter","4"],["nz-col","","nzFlex","auto"],[3,"minLength","optionTemplate","option","props","searchUrl","valueChange"],["searchModelDropdownComponent",""],["optionTmpl",""],["nz-col","","nz-tooltip","","nzFlex","30px","nzTooltipPlacement","top","nzTooltipTitle","Create a new customer"],[3,"saveLocation","buttonProps","popup"]],template:function(n,o){if(1&n&&(t.TgZ(0,"nz-form-item")(1,"nz-form-label"),t._UZ(2,"app-hint",0),t._uU(3," Search or Create Customer "),t.qZA(),t.TgZ(4,"nz-form-control",1)(5,"div",2)(6,"div",3)(7,"app-search-model-dropdown",4,5),t.NdJ("valueChange",function(p){return o.onCustomerSelected(p)}),t.qZA(),t.YNc(9,Bt,2,3,"ng-template",null,6,t.W1O),t.qZA(),t.TgZ(11,"div",7),t._UZ(12,"app-company-people-customer-add-btn",8),t.qZA()()()()),2&n){const r=t.MAs(10);t.xp6(4),t.Q6J("nzSpan",24),t.xp6(3),t.Q6J("minLength",3)("optionTemplate",r)("option","customerFirstName")("props",t.DdM(9,Kt))("searchUrl",o.CompanyRoutes.CUSTOMER_SEARCH),t.xp6(5),t.Q6J("saveLocation",o.salesPoint)("buttonProps",t.DdM(10,Vt))("popup",t.VKq(11,Xt,o.ModalOrDrawer.DRAWER))}},dependencies:[d.t3,d.SK,v.Nx,v.iK,v.Fd,Qt.SY,Dt.M,Nt.n,Ft.t],encapsulation:2}),e})();var D=a(5635),R=a(6152),Wt=a(8595),at=a(4055);const it=function(e,s){return{cart:e,item:s}};function Gt(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"div",4),t._UZ(3,"app-table-item-truncatable",5),t.qZA(),t.TgZ(4,"div",6),t._UZ(5,"app-amount-currency",7),t.TgZ(6,"div",8),t._UZ(7,"app-icon-button",9),t.TgZ(8,"input",10),t.NdJ("input",function(r){const T=t.CHM(n).$implicit,X=t.oxw();return t.KtG(X.onQuantityChange(r,T,X.cart))})("ngModelChange",function(r){const T=t.CHM(n).$implicit;return t.KtG(T.quantity=r)}),t.qZA(),t._UZ(9,"app-icon-button",11),t.qZA()()(),t.BQk()}if(2&e){const n=s.$implicit,o=t.oxw();t.xp6(3),t.Q6J("content",o.concatProductName(n.product))("limit",o.limit)("showToolTip",o.showToolTip),t.xp6(1),t.Q6J("nzFlex",o.statsWidth),t.xp6(1),t.Q6J("amount",n.subTotal),t.xp6(2),t.Q6J("action",o.decrement)("args",t.WLB(10,it,o.cart,n)),t.xp6(1),t.Q6J("ngModel",n.quantity),t.xp6(1),t.Q6J("action",o.increment)("args",t.WLB(13,it,o.cart,n))}}let rt=(()=>{class e{constructor(n,o,r){this.cartUsecase=n,this.responsive=o,this.util=r,this.limit=5,this.showToolTip=!1,this.statsWidth="250px",this.sub=new _.w0}calculateDrawerWidth(n){n&&n<700?(this.limit=50,this.showToolTip=!1,this.statsWidth="auto"):(this.showToolTip=!0,this.limit=100,this.statsWidth="250px")}ngOnDestroy(){this.sub.unsubscribe()}ngOnInit(){this.sub.add(this.responsive.screenWidth$.subscribe(n=>this.calculateDrawerWidth(n))),this.sub.add(this.cartUsecase.cart$.subscribe(n=>this.cart=n))}concatProductName(n){return this.util.getProductFullName(n)}increment(n){n&&n.cart&&n.item&&(n.item.increment(),n.cart.updateAmount())}decrement(n){n&&n.cart&&n.item&&(n.item.decrement(),n.cart.updateAmount())}onQuantityChange(n,o,r){const p=n.target.value;p&&p>0?(o.updateQuantity(Number(p)),r?.updateAmount()):n.target.value=1}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.j),t.Y36(q.k),t.Y36(Q.f))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sale-cart-items"]],decls:3,vars:1,consts:[["nzBordered",""],[1,"cart-items"],[4,"ngFor","ngForOf"],["nz-row","",1,"pa3","flex","justify-between","item-wrapper"],["nz-col","","nzFlex","auto",1,"item-product","self-center"],[3,"content","limit","showToolTip"],["nz-col","","nz-row","",1,"item-stats","self-center","flex","justify-between",3,"nzFlex"],[1,"b","mr2","self-center",3,"amount"],["nz-col","","nz-row","",1,"tr","self-center"],["icon","minus",1,"self-baseline",3,"action","args"],["min","1","nz-input","","type","number",1,"item-quantity",3,"ngModel","input","ngModelChange"],["icon","plus",1,"self-baseline",3,"action","args"]],template:function(n,o){1&n&&(t.TgZ(0,"nz-list",0)(1,"div",1),t.YNc(2,Gt,10,16,"ng-container",2),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("ngForOf",null==o.cart?null:o.cart.items))},dependencies:[x.sg,P.Fj,P.wV,P.JJ,P.qQ,P.On,d.t3,d.SK,D.Zp,R.n_,Wt.X,C.f,at.r],styles:[".cart-items[_ngcontent-%COMP%]{max-height:250px;overflow-y:scroll}.item-wrapper[_ngcontent-%COMP%]{border-style:solid;border-width:.5px;border-color:#d3d3d3}.item-control[_ngcontent-%COMP%]{align-self:baseline;text-align:end;max-width:150px;width:max-content}.item-quantity[_ngcontent-%COMP%]{min-width:70px;max-width:100px;width:73px}.item-product[_ngcontent-%COMP%]{margin-bottom:5px}@media screen and (max-width: 640px){.item-product[_ngcontent-%COMP%]{margin-bottom:17px;font-size:16px;font-weight:500}.item-stats[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:100%}}"]}),e})();var ct=a(6493),F=a(1971),lt=a(2577);let pt=(()=>{class e{constructor(){this.customer=new ct.d5,this.ModalOrDrawer=u.NH}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sale-cart"]],decls:13,vars:12,consts:[["nz-row",""],["nz-col","",3,"nzLg","nzSpan","nzXs"]],template:function(n,o){1&n&&(t.TgZ(0,"nz-card")(1,"div",0)(2,"div",1),t._UZ(3,"app-sale-cart-customer-search"),t.qZA(),t._UZ(4,"nz-divider"),t.TgZ(5,"div",1),t._UZ(6,"app-sale-cart-items"),t.qZA(),t._UZ(7,"nz-divider"),t.TgZ(8,"div",1),t._UZ(9,"app-sale-cart-amount"),t.qZA(),t._UZ(10,"nz-divider"),t.TgZ(11,"div",1),t._UZ(12,"app-sale-cart-buttons"),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("nzLg",24)("nzSpan",24)("nzXs",24),t.xp6(3),t.Q6J("nzLg",24)("nzSpan",24)("nzXs",24),t.xp6(3),t.Q6J("nzLg",24)("nzSpan",24)("nzXs",24),t.xp6(3),t.Q6J("nzLg",24)("nzSpan",24)("nzXs",24))},dependencies:[d.t3,d.SK,F.bd,lt.g,st,rt,Z,et],encapsulation:2}),e})();var ut=a(8040),O=a(3188),Y=a(3473),mt=a(9651),B=a(6616),K=a(1811);function jt(e,s){if(1&e&&(t.TgZ(0,"label",14),t._uU(1," Discount: "),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&e){const n=t.oxw().$implicit;t.xp6(3),t.hij(" ",null==n||null==n.price?null:n.price.discount,"% ")}}const qt=function(e){return{color:e}};function kt(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",3)(1,"nz-list-item")(2,"div",4)(3,"div",5)(4,"div",6)(5,"span"),t._uU(6),t.qZA()(),t.TgZ(7,"div",7)(8,"label"),t._uU(9," QTY: "),t.TgZ(10,"span",8),t._uU(11),t.TgZ(12,"small"),t._uU(13),t.qZA()()(),t.YNc(14,jt,4,1,"label",9),t.qZA()(),t.TgZ(15,"div",10),t._UZ(16,"app-amount-currency",11),t.qZA(),t.TgZ(17,"button",12),t.NdJ("click",function(){const p=t.CHM(n).$implicit,T=t.oxw();return t.KtG(T.onAddProductToCart(p))}),t._UZ(18,"span",13),t._uU(19," Add to cart "),t.qZA()()()()}if(2&e){const n=s.$implicit,o=t.oxw();t.Q6J("nzLg",8)("nzMd",8)("nzSm",12)("nzXXl",8)("nzXl",8)("nzXs",24),t.xp6(6),t.Oqu(o.getProductTitle(n)),t.xp6(4),t.Q6J("ngStyle",t.VKq(14,qt,o.isLowQuantity(n)?"#af2d2d":"#9eebcf")),t.xp6(1),t.hij(" ",null==n||null==n.basic?null:n.basic.quantity," "),t.xp6(2),t.hij(" ",null==n||null==n.basic||null==n.basic.unitOfMeasure?null:n.basic.unitOfMeasure.unit,""),t.xp6(1),t.Q6J("ngIf",null==n||null==n.price?null:n.price.discount),t.xp6(2),t.Tol("mt2 f4"),t.Q6J("amount",null==n||null==n.price?null:n.price.sellingPrice)}}let dt=(()=>{class e{constructor(n,o,r,p){this.saleProductUsecase=n,this.saleCartUsecase=o,this.msg=r,this.util=p,this.products=[],this.page=new ut.k,this.Array=Array,this.sub=new _.w0}ngOnInit(){this.sub.add(this.saleCartUsecase.cart$.subscribe(n=>this.cart=n)),this.sub.add(this.saleProductUsecase.searchResult$.subscribe(n=>this.updateProductList(n))),this.sub.add(this.saleCartUsecase.notifyType$.subscribe(n=>this.onNotifyChange(n)))}ngOnDestroy(){this.sub.unsubscribe()}getProductTitle(n){return this.util.getProductFullName(n)}isLowQuantity(n){const o=n?.basic;return!o||!o?.quantity||o?.quantity<=o?.lowStockPoint}onAddProductToCart(n){if(this.cart){const o=this.cart.addItem(n);this.notify(o,n)}}updateProductList(n){n&&(this.page=n.page,this.products=[...n.result??[]])}notify(n,o){n?this.msg.info(this.util.getProductName(o)+" Added to cart!"):this.msg.error(this.util.getProductName(o)+" Already in cart!")}onNotifyChange(n){n&&n==O.WV.CLEAR_PRODUCT_RESULT&&(this.products=[])}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Y.J),t.Y36(f.j),t.Y36(mt.dD),t.Y36(Q.f))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sales-product-grid"]],inputs:{products:"products",page:"page"},decls:3,vars:2,consts:[["nzGrid",""],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzLg","nzMd","nzSm","nzXXl","nzXl","nzXs",4,"ngFor","ngForOf"],["nz-col","",3,"nzLg","nzMd","nzSm","nzXXl","nzXl","nzXs"],[1,"grid-wrapper","tc-ns","hover-bg-washed-green"],[1,"grid","flex-wrap","justify-between"],[1,"flex","flex-row","justify-between","w-100","pl2","pr2"],[1,"mt2","flex","flex-row","w-100","pl2","pr2"],[1,"b",3,"ngStyle"],["class","ml2",4,"ngIf"],[1,"db","mt2","mb1"],[3,"amount"],["nz-button","","nzType","default",1,"mt1","mb2",3,"click"],["nz-icon","","nzTheme","outline","nzType","shopping-cart",1,"mr1"],[1,"ml2"]],template:function(n,o){1&n&&(t.TgZ(0,"nz-list",0)(1,"div",1),t.YNc(2,kt,20,16,"div",2),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("nzGutter",16),t.xp6(1),t.Q6J("ngForOf",o.products))},dependencies:[x.sg,x.O5,x.PC,d.t3,d.SK,B.ix,L.w,K.dQ,E.Ls,R.n_,R.AA,R.fl,C.f],styles:[".grid-wrapper[_ngcontent-%COMP%]{cursor:pointer}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#1890ff;height:120px;font-size:14px;line-height:20px;border-radius:4px;text-align:center;color:#fff;padding-left:5px;padding-right:5px;padding-top:3px;word-wrap:break-word;width:100%}"]}),e})();function tn(e,s){if(1&e&&(t.TgZ(0,"label",12)(1,"code"),t._uU(2),t.qZA()()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" - ",null==n||null==n.price?null:n.price.discount,"% ")}}const nn=function(e){return{color:e}};function en(e,s){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"nz-list-item",2),t.NdJ("dblclick",function(){const p=t.CHM(n).$implicit,T=t.oxw();return t.KtG(T.onAddProductToCart(p))}),t.TgZ(2,"div",3)(3,"span",4),t._uU(4),t.qZA()(),t.TgZ(5,"div",5),t._UZ(6,"app-amount-currency",6),t.TgZ(7,"label",7)(8,"label"),t._uU(9," QTY: "),t.TgZ(10,"span",8),t._uU(11),t.TgZ(12,"small"),t._uU(13),t.qZA()()(),t.YNc(14,tn,3,1,"label",9),t.qZA()(),t.TgZ(15,"button",10),t.NdJ("click",function(){const p=t.CHM(n).$implicit,T=t.oxw();return t.KtG(T.onAddProductToCart(p))}),t._UZ(16,"span",11),t._uU(17," Add to cart "),t.qZA()(),t.BQk()}if(2&e){const n=s.$implicit,o=t.oxw();t.xp6(4),t.Oqu(o.concatProductName(n)),t.xp6(2),t.Q6J("amount",null==n||null==n.price?null:n.price.sellingPrice),t.xp6(4),t.Q6J("ngStyle",t.VKq(6,nn,o.isLowQuantity(n)?"#af2d2d":"#189b69")),t.xp6(1),t.hij(" ",null==n||null==n.basic?null:n.basic.quantity," "),t.xp6(2),t.hij(" ",null==n||null==n.basic||null==n.basic.unitOfMeasure?null:n.basic.unitOfMeasure.unit,""),t.xp6(1),t.Q6J("ngIf",null==n||null==n.price?null:n.price.discount)}}let gt=(()=>{class e{constructor(n,o,r,p){this.saleProductUsecase=n,this.saleCartUsecase=o,this.msg=r,this.util=p,this.products=[],this.page=new ut.k,this.sub=new _.w0}ngOnInit(){this.sub.add(this.saleCartUsecase.cart$.subscribe(n=>this.cart=n)),this.sub.add(this.saleProductUsecase.searchResult$.subscribe(n=>this.updateProductList(n))),this.sub.add(this.saleCartUsecase.notifyType$.subscribe(n=>this.onNotifyChange(n)))}ngOnDestroy(){this.sub.unsubscribe()}onAddProductToCart(n){if(console.log(n),this.cart){const o=this.cart.addItem(n);this.notify(o,n)}}isLowQuantity(n){const o=n?.basic;return!o||!o?.quantity||o?.quantity<=o?.lowStockPoint}concatProductName(n){return this.util.getProductFullName(n)}updateProductList(n){n&&(this.page=n.page,this.products=n.result)}notify(n,o){n?this.msg.info(this.util.getProductName(o)+" Added to cart!"):this.msg.error(this.util.getProductName(o)+" Already in cart!")}onNotifyChange(n){n&&n===O.WV.CLEAR_PRODUCT_RESULT&&(this.saleCartUsecase.setNotifyType(O.WV.NONE),this.products=[])}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Y.J),t.Y36(f.j),t.Y36(mt.dD),t.Y36(Q.f))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sales-product-list"]],inputs:{products:"products",page:"page"},decls:2,vars:1,consts:[["nzBordered",""],[4,"ngFor","ngForOf"],[1,"hover-bg-washed-green",3,"dblclick"],[1,"item-product","hover-bg-washed-green"],["nz-typography","",1,""],[1,"item-stats","overflow-x-scroll-m"],[1,"b",3,"amount"],[1,"mv0","mh4"],[1,"b",3,"ngStyle"],["class","ml2",4,"ngIf"],["nz-button","","nzType","default",1,"mt1","cart-button",3,"click"],["nz-icon","","nzTheme","outline","nzType","shopping-cart",1,"mr1"],[1,"ml2"]],template:function(n,o){1&n&&(t.TgZ(0,"nz-list",0),t.YNc(1,en,18,8,"ng-container",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",o.products))},dependencies:[x.sg,x.O5,x.PC,B.ix,L.w,K.dQ,E.Ls,tt.ZU,R.n_,R.AA,C.f],styles:[".item-product[_ngcontent-%COMP%]{width:250px}@media screen and (max-width: 640px){.item-product[_ngcontent-%COMP%]{margin-bottom:5px;font-size:15px;font-weight:500;width:100%}.item-stats[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:100%}}"]}),e})();var J=(()=>((J||(J={})).SALE_PRODUCT_SEARCH_DISPLAY_TYPE="SALE_PRODUCT_SEARCH_DISPLAY_TYPE",J))(),ht=a(7579),on=a(9300),sn=a(1884),an=a(8505);function rn(e,s){if(1&e&&t._UZ(0,"span",7),2&e){const n=t.oxw();t.Q6J("nzType",n.isLoading?"loading":"search")}}let ft=(()=>{class e{constructor(n){this.saleProductUsecase=n,this.isLoading=!1,this.searchInput$=new ht.x,this.subscription=new _.w0}onInput(n){this.searchInput$.next(n.target.value)}ngOnInit(){this.saleProductUsecase.searching$.subscribe(n=>this.isLoading=n),this.listOnSearchInput()}ngOnDestroy(){this.subscription.unsubscribe()}listOnSearchInput(){this.subscription.add(this.searchInput$.pipe((0,on.h)(n=>null!==n&&n.length>=3),(0,sn.x)(),(0,an.b)(()=>this.saleProductUsecase.setSearching(!0))).subscribe(n=>this.saleProductUsecase.search(n).subscribe()))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Y.J))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sales-product-search"]],decls:13,vars:5,consts:[[3,"nzValidateStatus"],[3,"nzNoColon"],[1,"text-red-dark","m-r-3px"],[3,"nzSpan"],[2,"width","100%",3,"nzSuffix"],["nz-input","","nzSize","large","placeholder","start typing to search...","type","text",3,"autofocus","input"],["suffixIconSearch",""],["nz-icon","",3,"nzType"]],template:function(n,o){if(1&n&&(t.TgZ(0,"nz-form-control")(1,"nz-form-item")(2,"nz-form-control",0)(3,"nz-form-label",1)(4,"span")(5,"span",2),t._uU(6,"*"),t.qZA(),t._uU(7," Product Name or Brand "),t.qZA()(),t.TgZ(8,"nz-form-control",3)(9,"nz-input-group",4)(10,"input",5),t.NdJ("input",function(p){return o.onInput(p)}),t.qZA()()(),t.YNc(11,rn,1,1,"ng-template",null,6,t.W1O),t.qZA()()()),2&n){const r=t.MAs(12);t.xp6(2),t.Q6J("nzValidateStatus","success"),t.xp6(1),t.Q6J("nzNoColon",!0),t.xp6(5),t.Q6J("nzSpan",24),t.xp6(1),t.Q6J("nzSuffix",r),t.xp6(1),t.Q6J("autofocus",!0)}},dependencies:[d.t3,d.SK,v.Nx,v.iK,v.Fd,L.w,D.Zp,D.gB,D.ke,E.Ls],encapsulation:2}),e})();function cn(e,s){1&e&&(t.ynx(0),t._UZ(1,"app-sales-product-grid"),t.BQk())}function ln(e,s){1&e&&t._UZ(0,"app-sales-product-list")}function pn(e,s){if(1&e&&(t.ynx(0),t.YNc(1,cn,2,0,"ng-container",0),t.YNc(2,ln,1,0,"ng-template",null,2,t.W1O),t.BQk()),2&e){const n=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.type==o.display.grid)("ngIfElse",n)}}function un(e,s){1&e&&(t.TgZ(0,"nz-card")(1,"div",3),t._UZ(2,"span",4),t.qZA()())}let _t=(()=>{class e{constructor(n){this.saleProductUsecase=n,this.display=O.LI,this.isSearching=!1,this.type=O.LI.list}ngOnInit(){this.saleProductUsecase.searching$.subscribe(n=>this.isSearching=n)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Y.J))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sales-product-selection"]],inputs:{type:"type"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["isSearchingTmpl",""],["listTmpl",""],[1,"flex","justify-center"],["nz-icon","","nzTheme","outline","nzType","loading"]],template:function(n,o){if(1&n&&(t.YNc(0,pn,4,2,"ng-container",0),t.YNc(1,un,3,0,"ng-template",null,1,t.W1O)),2&n){const r=t.MAs(2);t.Q6J("ngIf",!o.isSearching)("ngIfElse",r)}},dependencies:[x.O5,L.w,F.bd,E.Ls,dt,gt],encapsulation:2}),e})(),Ct=(()=>{class e{constructor(n,o){this.cartUsecase=n,this.util=o,this.display=O.LI,this.isListView=!1,this.lowStockVisibility=!0,this.toggleLowStockVisibility=()=>{this.lowStockVisibility=!this.lowStockVisibility},this.handleClearSearchResult=()=>{this.cartUsecase.setNotifyType(O.WV.CLEAR_PRODUCT_RESULT)},this.toggleView=()=>{this.isListView=!this.isListView,this.saveUserPreference()}}ngOnInit(){this.getPreference()}saveUserPreference(){this.util.storeInLocal(J.SALE_PRODUCT_SEARCH_DISPLAY_TYPE,this.isListView?O.LI.list:O.LI.grid)}getPreference(){let n=this.util.getFromLocal(J.SALE_PRODUCT_SEARCH_DISPLAY_TYPE);n&&n==O.LI.list.toString()&&(this.isListView=!0)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.j),t.Y36(Q.f))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sales-product-search-and-selection"]],decls:15,vars:15,consts:[[1,"h-100"],["nzType","horizontal"],[1,""],[1,"flex","justify-between","mb2"],[3,"action","icon","text","tooltipTitle"],[1,"mr2"],[3,"action","icon","tooltipTitle"],[3,"type"]],template:function(n,o){1&n&&(t.TgZ(0,"nz-card",0),t._UZ(1,"app-sales-product-search")(2,"nz-divider",1),t.TgZ(3,"div",2)(4,"div",3)(5,"div"),t._UZ(6,"app-icon-button",4),t.qZA(),t.TgZ(7,"div",2)(8,"span"),t._uU(9,"Filters: "),t.qZA(),t.TgZ(10,"span",5),t._UZ(11,"app-icon-button",6),t.qZA(),t.TgZ(12,"span"),t._UZ(13,"app-icon-button",6),t.qZA()()(),t._UZ(14,"app-sales-product-selection",7),t.qZA()()),2&n&&(t.xp6(6),t.Q6J("action",o.handleClearSearchResult)("icon","clear")("text","Clear")("tooltipTitle","Clear the list of products search result"),t.xp6(5),t.Tol("tr"),t.Q6J("action",o.toggleLowStockVisibility)("icon",o.lowStockVisibility?"eye":"eye-invisible")("tooltipTitle","Show or hide products with zero stock balance"),t.xp6(2),t.Tol("tr"),t.Q6J("action",o.toggleView)("icon",o.isListView?"unordered-list":"appstore")("tooltipTitle","Toggle between list and grid layout"),t.xp6(1),t.Q6J("type",o.isListView?o.display.list:o.display.grid))},dependencies:[F.bd,lt.g,at.r,ft,_t],encapsulation:2}),e})();var mn=a(1278),dn=a(1206),N=a(8244),gn=a(4788),hn=a(4897);const fn=["receiptViewerComponent"];function _n(e,s){}const Cn=function(){return[16,16]};function Tn(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"nz-form-label",8),t._uU(4,"Date"),t.qZA(),t.TgZ(5,"app-date-picker",9),t.NdJ("selectChange",function(r){t.CHM(n);const p=t.oxw();return t.KtG(p.onDateSelected(r))}),t.qZA()(),t.TgZ(6,"div",10)(7,"div",11)(8,"div",12)(9,"button",13),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.onSearch())}),t.TgZ(10,"span"),t._uU(11,"Proceed"),t.qZA(),t._UZ(12,"span",14),t.qZA()()()()()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("nzGutter",t.DdM(12,Cn)),t.xp6(1),t.Q6J("nzLg",16)("nzXs",24),t.xp6(1),t.Q6J("nzNoColon",!1),t.xp6(2),t.Q6J("hasError",n.isDateInvalid),t.xp6(1),t.Q6J("nzLg",24)("nzXs",24),t.xp6(2),t.Q6J("nzLg",12)("nzSpan",12)("nzXs",10),t.xp6(1),t.Q6J("nzLoading",n.isLoading)("nzSize","default")}}function Sn(e,s){if(1&e&&(t.ynx(0),t._UZ(1,"app-sales-transaction-receipt-viewer",15,16),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("data",n.reportData)("showControls",!0)}}function xn(e,s){1&e&&t._UZ(0,"nz-empty")}let Tt=(()=>{class e{constructor(n,o){this.passportService=n,this.reportUsecase=o,this.isLoading=!1,this.searchPayload={},this.isDateInvalid=!1,this.username="",this.sub=new _.w0}ngOnInit(){}ngOnDestroy(){this.sub.unsubscribe()}onDateSelected(n){n?(this.date=n,this.isDateInvalid=!1):this.isDateInvalid=!0}onSearch(){var n=this;return(0,S.Z)(function*(){if(!n.date)return void(n.isDateInvalid=!0);n.isLoading=!0;const o=new mn.k;o.date=n.date,o.user=new ct.KN,n.username=n.passportService.getLoggedInUsername(),o.user.username=n.passportService.getLoggedInUsername();const r=yield(0,A.z)(n.reportUsecase.searchTransactionReport(o));n.displayReportData(r)})()}onSearchByChange(n){}displayReportData(n){this.reportData=n,this.isLoading=!1}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(dn.Y),t.Y36($))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sales-cashier-shift"]],viewQuery:function(n,o){if(1&n&&t.Gf(fn,7),2&n){let r;t.iGM(r=t.CRH())&&(o.receiptViewerComponent=r.first)}},decls:9,vars:4,consts:[[3,"breadcrumb","content"],["breadCrumbTmpl",""],["content",""],[4,"ngIf","ngIfElse"],["noFileTmpl",""],["nz-col","","nzSpan","24",1,"ph-main","m-t-1em"],["nz-row","",3,"nzGutter"],["nz-col","",1,"m-t-sm-1em",3,"nzLg","nzXs"],[3,"nzNoColon"],[3,"hasError","selectChange"],["nz-col","","nzSpan","24",1,"m-t-1em","m-t-sm-2em","m-b-2em",3,"nzLg","nzXs"],["nz-row","","nzJustify","space-between"],["nz-col","",3,"nzLg","nzSpan","nzXs"],["nz-button","","nzType","primary",3,"nzLoading","nzSize","click"],["nz-icon","","nzType","check"],[3,"data","showControls"],["receiptViewerComponent",""]],template:function(n,o){if(1&n&&(t.TgZ(0,"page-header",0),t.YNc(1,_n,0,0,"ng-template",null,1,t.W1O),t.YNc(3,Tn,13,13,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(5,"nz-card"),t.YNc(6,Sn,3,2,"ng-container",3),t.YNc(7,xn,1,0,"ng-template",null,4,t.W1O),t.qZA()),2&n){const r=t.MAs(2),p=t.MAs(4),T=t.MAs(8);t.Q6J("breadcrumb",r)("content",p),t.xp6(6),t.Q6J("ngIf",o.reportData)("ngIfElse",T)}},dependencies:[x.O5,N.q,d.t3,d.SK,v.iK,B.ix,L.w,K.dQ,F.bd,E.Ls,gn.p9,hn.L,G.l],encapsulation:2}),e})();var V=a(788),yn=a(9646);function vn(e,s){}let St=(()=>{class e{constructor(n,o){this.cartUsecase=n,this.modalService=o}ngOnInit(){this.cartUsecase.cart$.subscribe(n=>this.cart=n)}canDeactivate(){return new ht.x,(0,yn.of)(!0)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.j),t.Y36(h.Sf))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sales-pos"]],decls:8,vars:1,consts:[["title","Sales Point",3,"breadcrumb"],["breadCrumbTmpl",""],["nz-row",""],["nz-col","","nzFlex","3",1,"mr1"],["nz-col","","nzFlex","2",1,"ml1"]],template:function(n,o){if(1&n&&(t._UZ(0,"page-header",0),t.YNc(1,vn,0,0,"ng-template",null,1,t.W1O),t.TgZ(3,"div",2)(4,"div",3),t._UZ(5,"app-sales-product-search-and-selection"),t.qZA(),t.TgZ(6,"div",4),t._UZ(7,"app-sale-cart"),t.qZA()()),2&n){const r=t.MAs(2);t.Q6J("breadcrumb",r)}},dependencies:[N.q,d.t3,d.SK,Ct,pt],encapsulation:2}),e})();function Pn(e,s){}const On=function(){return[16,16]};function Zn(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"nz-form-label",6),t._uU(4,"Receipt Number"),t.qZA(),t.TgZ(5,"nz-form-control",7)(6,"input",8),t.NdJ("ngModelChange",function(r){t.CHM(n);const p=t.oxw();return t.KtG(p.receiptSerial=r)}),t.qZA()()(),t.TgZ(7,"div",9)(8,"div",10)(9,"div",11)(10,"button",12),t.NdJ("click",function(){t.CHM(n);const r=t.oxw();return t.KtG(r.onSearch())}),t.TgZ(11,"span"),t._uU(12,"Proceed"),t.qZA(),t._UZ(13,"span",13),t.qZA()()()()()()}if(2&e){const n=t.oxw();t.xp6(1),t.Q6J("nzGutter",t.DdM(13,On)),t.xp6(1),t.Q6J("nzLg",16)("nzXs",24),t.xp6(1),t.Q6J("nzNoColon",!1),t.xp6(2),t.Q6J("nzValidateStatus",n.isValidInput?"success":"error"),t.xp6(1),t.Q6J("ngModel",n.receiptSerial),t.xp6(1),t.Q6J("nzLg",24)("nzXs",24),t.xp6(2),t.Q6J("nzLg",12)("nzSpan",12)("nzXs",10),t.xp6(1),t.Q6J("nzLoading",n.isLoading)("nzSize","default")}}let xt=(()=>{class e{constructor(n){this.usecase=n,this.isLoading=!1,this.receiptSerial="",this.isValidInput=!0}onSearch(){var n=this;return(0,S.Z)(function*(){if(!n.receiptSerial)return void(n.isValidInput=!1);n.isValidInput=!0;const o=yield(0,A.z)(n.usecase.searchTransactionReceipt(n.receiptSerial));n.usecase.handlePreviewReceipt(o)})()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36($))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-sales-reprint-receipt"]],decls:5,vars:2,consts:[["title","Reprint Receipt",3,"breadcrumb","content"],["breadCrumbTmpl",""],["contentTmpl",""],["nz-col","","nzSpan","24",1,"ph-main","m-t-1em"],["nz-row","",3,"nzGutter"],["nz-col","",1,"m-t-sm-1em",3,"nzLg","nzXs"],["nzFor","billNumber",3,"nzNoColon"],[3,"nzValidateStatus"],["nz-input","","placeholder","Enter receipt serial number",3,"ngModel","ngModelChange"],["nz-col","","nzSpan","24",1,"m-t-1em","m-t-sm-2em","m-b-2em",3,"nzLg","nzXs"],["nz-row","","nzJustify","space-between"],["nz-col","",3,"nzLg","nzSpan","nzXs"],["nz-button","","nzType","primary",3,"nzLoading","nzSize","click"],["nz-icon","","nzType","check"]],template:function(n,o){if(1&n&&(t.TgZ(0,"page-header",0),t.YNc(1,Pn,0,0,"ng-template",null,1,t.W1O),t.YNc(3,Zn,14,14,"ng-template",null,2,t.W1O),t.qZA()),2&n){const r=t.MAs(2),p=t.MAs(4);t.Q6J("breadcrumb",r)("content",p)}},dependencies:[P.Fj,P.JJ,P.On,N.q,d.t3,d.SK,v.iK,v.Fd,B.ix,L.w,K.dQ,D.Zp,E.Ls],encapsulation:2}),e})();var zt=a(9132);const wn=[{path:"sale-pos",component:St,canDeactivate:[e=>e.canDeactivate()]},{path:"order",component:V.s},{path:"refund",component:V.s},{path:"sale-shift",component:Tt},{path:"reprint-receipt",component:xt}];let An=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[zt.Bz.forChild(wn),zt.Bz]}),e})(),Un=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[An,i.m8,U.ProductsModule,l.CompanyModule]}),e})()},788:(W,w,a)=>{a.d(w,{s:()=>f});var i=a(4650),l=a(9132),U=a(6616),_=a(7044),M=a(1811),t=a(6174);let f=(()=>{class C{}return C.\u0275fac=function(S){return new(S||C)},C.\u0275cmp=i.Xpm({type:C,selectors:[["app-coming-soon"]],decls:4,vars:0,consts:[["nzStatus","404","nzSubTitle","Coming soon, stay tuned for updates. \u{1f680}","nzTitle","Coming Soon"],["nz-result-extra",""],["nz-button","","nzType","primary","routerLink","/dashboard/"]],template:function(S,A){1&S&&(i.TgZ(0,"nz-result",0)(1,"div",1)(2,"button",2),i._uU(3,"Back Home"),i.qZA()()())},dependencies:[l.rH,U.ix,_.w,M.dQ,t.ml,t.ey],encapsulation:2}),C})()},2197:(W,w,a)=>{a.d(w,{q:()=>m});var i=a(4650),l=a(6895),U=a(6616),_=a(7044),M=a(1811),t=a(6497),f=a(1102);function C(u,h){if(1&u&&i._UZ(0,"span",5),2&u){const c=i.oxw(2);i.Tol(c.iconClass),i.Q6J("nzType",c.icon)}}function Z(u,h){if(1&u&&i._UZ(0,"span",6),2&u){const c=i.oxw(2);i.Q6J("innerHTML",c.buttonText,i.oJD)}}function S(u,h){if(1&u){const c=i.EpF();i.ynx(0),i.TgZ(1,"button",2),i.NdJ("nzOnCancel",function(){i.CHM(c);const z=i.oxw();return i.KtG(z.cancelAction(z.args))})("nzOnConfirm",function(){i.CHM(c);const z=i.oxw();return i.KtG(z.action(z.args))}),i.YNc(2,C,1,3,"span",3),i.YNc(3,Z,1,1,"span",4),i.qZA(),i.BQk()}if(2&u){const c=i.oxw();i.xp6(1),i.Tol(c.buttonClass),i.Q6J("disabled",c.disabled)("nzCancelText",c.popCancelText)("nzOkText",c.popOkText)("nzPopconfirmPlacement",c.popConfirmPlacement)("nzPopconfirmTitle",c.popConfirmTitle)("nzSize",c.buttonSize)("nzType",c.buttonType),i.xp6(1),i.Q6J("ngIf",c.icon),i.xp6(1),i.Q6J("ngIf",c.buttonText)}}function A(u,h){if(1&u&&i._UZ(0,"span",5),2&u){const c=i.oxw(2);i.Tol(c.iconClass),i.Q6J("nzType",c.icon)}}function g(u,h){if(1&u&&i._UZ(0,"span",6),2&u){const c=i.oxw(2);i.Q6J("innerHTML",c.buttonText,i.oJD)}}function y(u,h){if(1&u){const c=i.EpF();i.TgZ(0,"button",7),i.NdJ("click",function(){i.CHM(c);const z=i.oxw();return i.KtG(z.action(z.args))}),i.YNc(1,A,1,3,"span",3),i.YNc(2,g,1,1,"span",4),i.qZA()}if(2&u){const c=i.oxw();i.Tol(c.buttonClass),i.Q6J("nzSize",c.buttonSize)("nzType",c.buttonType),i.xp6(1),i.Q6J("ngIf",c.icon),i.xp6(1),i.Q6J("ngIf",c.buttonText)}}let m=(()=>{class u{constructor(){this.disabled=!1,this.usePopConfirm=!1,this.args={},this.icon="",this.iconClass="",this.popCancelText="No, Cancel",this.popOkText="Yes, Continue",this.popConfirmTitle="Are you sure?",this.popConfirmPlacement="top",this.buttonText="",this.buttonType="default",this.buttonSize="large",this.buttonClass="",this.action=()=>{},this.cancelAction=c=>{}}}return u.\u0275fac=function(c){return new(c||u)},u.\u0275cmp=i.Xpm({type:u,selectors:[["app-simple-button"]],inputs:{disabled:"disabled",usePopConfirm:"usePopConfirm",args:"args",icon:"icon",iconClass:"iconClass",popCancelText:"popCancelText",popOkText:"popOkText",popConfirmTitle:"popConfirmTitle",popConfirmPlacement:"popConfirmPlacement",buttonText:"buttonText",buttonType:"buttonType",buttonSize:"buttonSize",buttonClass:"buttonClass",action:"action",cancelAction:"cancelAction"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noPopConfirmButton",""],["nz-button","","nz-popconfirm","",1,"mr-15","w-100",3,"disabled","nzCancelText","nzOkText","nzPopconfirmPlacement","nzPopconfirmTitle","nzSize","nzType","nzOnCancel","nzOnConfirm"],["nz-icon","","nzTheme","outline",3,"class","nzType",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["nz-icon","","nzTheme","outline",3,"nzType"],[3,"innerHTML"],["nz-button","",1,"mr-15","w-100",3,"nzSize","nzType","click"]],template:function(c,I){if(1&c&&(i.YNc(0,S,4,11,"ng-container",0),i.YNc(1,y,3,6,"ng-template",null,1,i.W1O)),2&c){const z=i.MAs(2);i.Q6J("ngIf",I.usePopConfirm)("ngIfElse",z)}},dependencies:[l.O5,U.ix,_.w,M.dQ,t.JW,f.Ls],encapsulation:2}),u})()}}]);